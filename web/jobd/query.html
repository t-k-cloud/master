<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="vendor/jquery/jquery.min.js"></script>
<script>
$(document).ready(function () {
	$("#query").click(function() {
		$.ajax({
			method: "POST",
			url:"run",
			contentType: "application/json; charset=utf-8",
			dataType: "json" /* expecting data type */,
			data: JSON.stringify({
				type: $("#type").val(),
				target: $("#target").val()
			})
		}).done(function (msg) {
			$("#retjson").text(JSON.stringify(msg, null, 2));
			setTimeout(pullLog, 500);
		});
	});

	$("#stdin-button").click(function() {
		$.ajax({
			method: "POST",
			url:"stdin",
			contentType: "application/json; charset=utf-8",
			dataType: "json" /* expecting data type */,
			data: JSON.stringify({
				'stdin': $("#stdin-string").val(),
			})
		}).done(function (msg) {
			$("#retjson").text(JSON.stringify(msg, null, 2));
			setTimeout(pullLog, 500);
		});
	});

	function pullLog() {
		$.ajax({
			method: "GET",
			url:"log/all",
			contentType: "application/text; charset=utf-8",
			dataType: "text" /* expecting data type */
		}).done(function (log) {
			$("#log").text(log);
		});
	}

	$("#log-area").click(function() { pullLog(); });
	$("#retjson").text(JSON.stringify({}));

	pullLog();
});
</script>
<style>
#log-area:hover {
	cursor:pointer;
}
</style>
</head>
<body>
<h3>Query</h3>
<select id="type">
<option value="goal">goal</option>
<option value="unit">unit</option>
<option value="dryrun">dryrun</option>
</select>
<input  id="target" placeholder="target name"
        style="width:70%"/>
<button id="query">query</button>

<h3>Stdin</h3>
<input  id="stdin-string" placeholder="standard input"
        style="width:70%"/>
<button id="stdin-button">input</button>

<h3>Return JSON</h3>
<span id="retjson" style="color:gray"></span>

<h3>Log</h3>
<div id="log-area">
<pre id="log" style="background:black;color:gray;">
</pre>
</div>

</body>
</html>
